@model  List<KutuphaneCoresuz.Models.ModelforDB.KitapUyeViewModel>

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@Html.Partial("~/Views/Shared/_HeaderAdmin.cshtml")


<br />
<br />

<div id="logo" class="pull-left" style="margin-left:40%">


    @foreach (var item in Model)
    {
        using (Html.BeginForm("AdminEditUyeKitapResult", "Admin",new { id=item.id}, FormMethod.Post))
        {
    <div class="form-horizontal">
        <h2>Kitap Duzenle</h2>
        <br />
        <hr />
        <div class="col-md-10">
            <input type="hidden" id="id" name="id" class="form-control" value="@item.id"   />
        </div>
        <div class="form-group">
            @Html.Label("Kullanıcı Adı:", new { @class = "control-label col-md-3" })
            <div class="col-md-10">

                <div class="form-group">
                    <select class="form-control" id="kullaniciAd"  name="kullaniciadi">
                        <option>Kullancı Adı Seçiniz</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="form-group">
            @Html.Label("Hangi Kitabı Düzenlenecek", new { @class = "control-label col-md-3" })
            <div class="col-md-10">

                <div class="form-group">
                    <select class="form-control" id="uyeAd"  name="uyeisim">
                        <option>Uye Adı Seçiniz</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="form-group">
            @Html.Label("Kitap Adı Seçiniz", new { @class = "control-label col-md-3" })
            <div class="col-md-10">

                <div class="form-group">
                    <select class="form-control" id="kitapadi" name="kitapadi">
                        <option>Kitap Adı Seçiniz</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                @Html.Label("Kitap Durum:", htmlAttributes: new { @class = "control-label col-md-2" })
             
                <div class="col-md-10">

                    <select class="form-control role" id="kitapdurum" name=role>
                        <option value="Uye">Üyede</option>
                        <option value="kutuphane">Kütüphanede</option>
                    </select>
                </div>
                <div class="form-group">
                    <button type="submit" value="Kaydet" class="btn btn-danger btn-kitapduzenle" style="width:inherit" id="btn-degistir">Değiştir</button>

                </div>

            </div>
            </div></div>
            }
       }




            @section Scripts
{
                <script type="text/javascript">
                    function GetNames() {

                        $.ajax({
                            url: `/Kitap/AdSoyad?id=0`,
                            method: "post",
                            dataType: "json",
                            success: function (data) {

                                $.each(data.text, function (key, yazarDetaylari) {
                                    $("#ad").append(`<option value="${yazarDetaylari["Value"]}">${yazarDetaylari["Text"]}</option>`);
                                    //ad.append(`<option value="${yazarDetaylari["Value"]}">${yazarDetaylari["Text"]}</option>`);

                                });
                            },
                            complete: function () {

                            }

                        });
                    }
                  
 function GetUyeNames()
 {
    // alert("fonksiyon");
        $.ajax({
         url: `/Admin/UyeAdSoyad?id=0`,
        method: "post",
        dataType: "json",
        success: function (data)
            {

                $.each(data.text, function (key, uyeDetaylari) {
                $("#uyeAd").append(`<option value="${uyeDetaylari["Value"]}">${uyeDetaylari["Text"]}</option>`);
                //ad.append(`<option value="${yazarDetaylari["Value"]}">${yazarDetaylari["Text"]}</option>`);

            });
            },
            complete: function () {

            }
       });//ajax sonu


 }
            function GetKullaniciNames() {
                // alert("fonksiyon");
                $.ajax({
                    url: `/Admin/UyeKullaniciAdi?id=0`,
                    method: "post",
                    dataType: "json",
                    success: function (data) {

                        $.each(data.text, function (key, uyeDetaylari) {
                            $("#kullaniciAd").append(`<option value="${uyeDetaylari["Value"]}">${uyeDetaylari["Text"]}</option>`);
                            //ad.append(`<option value="${yazarDetaylari["Value"]}">${yazarDetaylari["Text"]}</option>`);

                        });
                    },
                    complete: function () {

                    }
                });//ajax sonu
            }

                    function GetKitapAdi(id) {
                       // alert("kitap");
                        
                      // id = document.getElementById("#id").val();
                       // alert($("#id").val());
                // alert("fonksiyon");
                $.ajax({
                    url: `/Admin/UyeKitapJson?id=${id}`,
                    method: "post",
                    dataType: "json",
                    success: function (data) {

                        $.each(data.text, function (key, uyeDetaylari) {
                            $("#kitapadi").append(`<option value="${uyeDetaylari["Value"]}">${uyeDetaylari["Text"]}</option>`);
                            //ad.append(`<option value="${yazarDetaylari["Value"]}">${yazarDetaylari["Text"]}</option>`);

                        });
                    },
                    complete: function () {

                    }
                });//ajax sonu
            }

                    $(document).ready(function () {
                        GetNames();
                        GetUyeNames();
                        GetKullaniciNames();
                        var id = document.getElementById("#id");
                        GetKitapAdi(id);

                        $(".btn-kitapduzenle").click(function () {
                            var selectedRole = $(this).children("option:selected").val();

                        });
                    });
          
                    


                </script>
            }
